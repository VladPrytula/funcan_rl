## **Appendix A2.1: Generator-Based σ-Algebra Construction**

### **Supplementary Material for Week 2, Day 2**

**Reading time**: ~60-75 minutes (optional, self-contained)

**Prerequisites**: Week 1, Day 1 (σ-algebras, measurable spaces)

**Learning Objectives**:
* Master the π-λ theorem (Dynkin's theorem) for proving σ-algebra equality
* Understand the monotone class theorem and its role in proving measurability
* Apply these tools to rigorously construct the Borel σ-algebra from generating classes
* Recognize the connection to product σ-algebras (Week 2, Day 2 main content)

---

### **I. Motivation: The Challenge of σ-Algebra Verification**

**The problem we face.** In Week 1, Day 1, we defined the **Borel σ-algebra** $\mathcal{B}(\mathbb{R})$ as the smallest σ-algebra containing all open sets. We asserted that this σ-algebra is generated by simpler classes, such as open intervals $(a,b)$:
$$
\mathcal{B}(\mathbb{R}) = \sigma(\{(a,b) : a < b\})
$$

But how do we *prove* this equality? To verify that a collection $\mathcal{F}$ is a σ-algebra, we must check three axioms (contains $X$, closed under complements, closed under countable unions). To show two σ-algebras are equal, we must prove mutual inclusion—a potentially intractable task when dealing with uncountable collections.

**The key insight.** Rather than verifying the σ-algebra axioms directly, we exploit a fundamental observation: σ-algebras are characterized by two simpler structural properties—closure under finite intersections (π-systems) and closure under certain set operations (λ-systems). The **π-λ theorem** (Dynkin's theorem) provides a powerful criterion: if a π-system generates a σ-algebra, any λ-system containing that π-system must contain the entire σ-algebra.

This technique is indispensable not only for constructing Borel σ-algebras but also for:
- **Product σ-algebras** (Week 2, Day 2): Proving $\mathcal{F}_X \otimes \mathcal{F}_Y = \sigma(\{A \times B : A \in \mathcal{F}_X, B \in \mathcal{F}_Y\})$
- **Trajectory spaces in RL** (Week 4): Constructing σ-algebras on infinite product spaces $\mathcal{S}^{\infty}$
- **Measurability of limits** (Throughout): Using the monotone class theorem to prove measurability of functions defined via limits

**What we accomplish here.** We develop the complete theory of generator-based σ-algebra construction, proving the π-λ theorem, the monotone class theorem, and their application to the Borel σ-algebra. This material is supplementary—the main development in Week 2 uses these results, but readers can accept them on trust and return here for full proofs.

---

### **II. π-Systems and λ-Systems**

We begin by isolating two key structural properties that characterize σ-algebras.

**Definition A2.1.1 (π-System).** {#DEF-2.2.A1} Let $X$ be a non-empty set. A collection $\mathcal{P} \subseteq 2^X$ is a **π-system** if it is closed under finite intersections:
$$
\forall A, B \in \mathcal{P}, \quad A \cap B \in \mathcal{P}
$$

**Example A2.1.1 (π-Systems).**
1. **Open intervals on ℝ**: The collection $\mathcal{P} = \{(a,b) : a < b\}$ is a π-system. If $(a_1, b_1)$ and $(a_2, b_2)$ are open intervals, their intersection $(a_1, b_1) \cap (a_2, b_2) = (\max(a_1, a_2), \min(b_1, b_2))$ is either an open interval (if $\max(a_1, a_2) < \min(b_1, b_2)$) or empty (which we include by convention).

2. **Rectangles in product spaces**: The collection $\mathcal{R} = \{A \times B : A \in \mathcal{F}_X, B \in \mathcal{F}_Y\}$ is a π-system on $X \times Y$. The intersection $(A_1 \times B_1) \cap (A_2 \times B_2) = (A_1 \cap A_2) \times (B_1 \cap B_2)$ is a rectangle.

3. **Trivial examples**: The empty collection $\emptyset$ is vacuously a π-system. Any singleton $\{A\}$ is a π-system since $A \cap A = A$.

**Observation.** Every σ-algebra is a π-system (since finite intersections are a special case of countable intersections, and σ-algebras are closed under countable intersections by De Morgan's laws). However, π-systems are much simpler to verify—they require only closure under pairwise intersections, not the full countable operations.

---

**Definition A2.1.2 (λ-System, Dynkin System).** {#DEF-2.2.A2} Let $X$ be a non-empty set. A collection $\mathcal{L} \subseteq 2^X$ is a **λ-system** (also called a **Dynkin system** or **d-system**) if it satisfies three properties:
1. **(Contains the whole space)** $X \in \mathcal{L}$
2. **(Closure under complements)** If $A \in \mathcal{L}$, then $A^c = X \setminus A \in \mathcal{L}$
3. **(Closure under countable disjoint unions)** If $\{A_n\}_{n=1}^{\infty}$ is a sequence of pairwise disjoint sets in $\mathcal{L}$, then $\bigcup_{n=1}^{\infty} A_n \in \mathcal{L}$

**Remark A2.1.1 (λ-Systems vs. σ-Algebras).** A λ-system is "almost" a σ-algebra—it differs only in axiom 3: λ-systems require closure under countable *disjoint* unions, while σ-algebras require closure under countable unions (not necessarily disjoint). This seemingly minor difference is crucial: every σ-algebra is a λ-system, but not every λ-system is a σ-algebra.

**Proposition A2.1.1 (σ-Algebras Are Both π-Systems and λ-Systems).** {#PROP-2.2.A1} Let $\mathcal{F}$ be a σ-algebra on $X$. Then $\mathcal{F}$ is both a π-system and a λ-system.

*Proof.*
- **π-system property**: Let $A, B \in \mathcal{F}$. By De Morgan's laws, $A \cap B = (A^c \cup B^c)^c$. Since $\mathcal{F}$ is closed under complements and countable unions, $A \cap B \in \mathcal{F}$.
- **λ-system properties**:
  1. $X \in \mathcal{F}$ by the σ-algebra axiom 1.
  2. Closure under complements is σ-algebra axiom 2.
  3. If $\{A_n\}$ are pairwise disjoint and in $\mathcal{F}$, then $\bigcup A_n \in \mathcal{F}$ by σ-algebra axiom 3.
$\square$

**The converse is also true**, and this is the key to Dynkin's theorem:

**Proposition A2.1.2 (π-System + λ-System = σ-Algebra).** {#PROP-2.2.A2} If $\mathcal{C}$ is both a π-system and a λ-system on $X$, then $\mathcal{C}$ is a σ-algebra.

*Proof.* We must verify the three σ-algebra axioms:
1. $X \in \mathcal{C}$ (by λ-system axiom 1) ✓
2. Closure under complements: $A \in \mathcal{C} \Rightarrow A^c \in \mathcal{C}$ (by λ-system axiom 2) ✓
3. Closure under countable unions: Let $\{A_n\}_{n=1}^{\infty} \subseteq \mathcal{C}$. We must show $\bigcup_{n=1}^{\infty} A_n \in \mathcal{C}$.

**Key step**: Convert to disjoint union using the π-system property. Define:
$$
B_1 = A_1, \quad B_2 = A_2 \setminus A_1, \quad B_3 = A_3 \setminus (A_1 \cup A_2), \quad \ldots
$$
More precisely, $B_n = A_n \setminus \bigcup_{k=1}^{n-1} A_k$. These sets are pairwise disjoint and satisfy $\bigcup_{n=1}^{\infty} B_n = \bigcup_{n=1}^{\infty} A_n$.

**Claim**: Each $B_n \in \mathcal{C}$.
- $B_1 = A_1 \in \mathcal{C}$ by assumption.
- $B_2 = A_2 \setminus A_1 = A_2 \cap A_1^c$. Since $\mathcal{C}$ is a π-system, $A_2 \cap A_1^c \in \mathcal{C}$ (using $A_1^c \in \mathcal{C}$ from λ-system closure under complements).
- By induction, $B_n = A_n \cap \left(\bigcup_{k=1}^{n-1} A_k\right)^c \in \mathcal{C}$ (using π-system and λ-system properties repeatedly).

Since $\{B_n\}$ are pairwise disjoint and in $\mathcal{C}$, the λ-system property gives $\bigcup_{n=1}^{\infty} B_n \in \mathcal{C}$. Therefore $\bigcup_{n=1}^{\infty} A_n = \bigcup_{n=1}^{\infty} B_n \in \mathcal{C}$. $\square$

---

### **III. Dynkin's π-λ Theorem**

We now prove the central result that justifies generator-based σ-algebra constructions.

**Theorem A2.1.1 (Dynkin's π-λ Theorem).** {#THM-2.2.A1} Let $\mathcal{P}$ be a π-system on $X$ and $\mathcal{L}$ a λ-system on $X$ with $\mathcal{P} \subseteq \mathcal{L}$. Then:
$$
\sigma(\mathcal{P}) \subseteq \mathcal{L}
$$
where $\sigma(\mathcal{P})$ denotes the smallest σ-algebra containing $\mathcal{P}$.

**Interpretation.** To prove that $\sigma(\mathcal{P}) \subseteq \mathcal{L}$, it suffices to verify that $\mathcal{L}$ is a λ-system containing the π-system $\mathcal{P}$—much simpler than verifying $\mathcal{L}$ is a σ-algebra. This is the workhorse for proving σ-algebra equality: to show $\sigma(\mathcal{P}) = \sigma(\mathcal{Q})$, prove both are λ-systems containing the other's π-system.

*Proof.* The proof proceeds in four steps: construct the smallest λ-system containing $\mathcal{P}$, show it is also a π-system, conclude it is a σ-algebra, and deduce the desired inclusion.

**Step 1: Construct $\lambda(\mathcal{P})$, the smallest λ-system containing $\mathcal{P}$.**

Define:
$$
\lambda(\mathcal{P}) = \bigcap \{\mathcal{M} : \mathcal{M} \text{ is a λ-system and } \mathcal{P} \subseteq \mathcal{M}\}
$$

This is a well-defined collection (the intersection is non-empty since the power set $2^X$ is a λ-system containing $\mathcal{P}$). We claim $\lambda(\mathcal{P})$ is a λ-system:
- $X \in \lambda(\mathcal{P})$ since $X$ is in every λ-system.
- If $A \in \lambda(\mathcal{P})$, then $A$ is in every λ-system $\mathcal{M}$ containing $\mathcal{P}$. Since each such $\mathcal{M}$ is closed under complements, $A^c \in \mathcal{M}$ for all such $\mathcal{M}$. Thus $A^c \in \lambda(\mathcal{P})$.
- If $\{A_n\}$ are pairwise disjoint sets in $\lambda(\mathcal{P})$, then $A_n \in \mathcal{M}$ for all λ-systems $\mathcal{M} \supseteq \mathcal{P}$. By closure of each $\mathcal{M}$ under disjoint unions, $\bigcup A_n \in \mathcal{M}$ for all such $\mathcal{M}$. Thus $\bigcup A_n \in \lambda(\mathcal{P})$.

By construction, $\mathcal{P} \subseteq \lambda(\mathcal{P})$ and $\lambda(\mathcal{P})$ is the smallest λ-system with this property.

**Step 2: Show $\lambda(\mathcal{P})$ is a π-system.**

This is the heart of the proof. We must show that for any $A, B \in \lambda(\mathcal{P})$, we have $A \cap B \in \lambda(\mathcal{P})$.

**Substep 2a**: For fixed $A \in \lambda(\mathcal{P})$, define:
$$
\mathcal{D}_A = \{B \in \lambda(\mathcal{P}) : A \cap B \in \lambda(\mathcal{P})\}
$$

**Claim**: $\mathcal{D}_A$ is a λ-system.
- $X \in \mathcal{D}_A$ since $A \cap X = A \in \lambda(\mathcal{P})$.
- If $B \in \mathcal{D}_A$, then $A \cap B \in \lambda(\mathcal{P})$. Note that $A \cap B^c = A \setminus B = A \setminus (A \cap B)$. Since $A \in \lambda(\mathcal{P})$ and $A \cap B \in \lambda(\mathcal{P})$, and $A \setminus (A \cap B) = A \cap (A \cap B)^c$, we can write $A \cap B^c$ as a complement within $\lambda(\mathcal{P})$ and thus $A \cap B^c \in \lambda(\mathcal{P})$. Therefore $B^c \in \mathcal{D}_A$.
- If $\{B_n\}$ are pairwise disjoint sets in $\mathcal{D}_A$, then $A \cap B_n \in \lambda(\mathcal{P})$ for all $n$. The sets $\{A \cap B_n\}$ are pairwise disjoint (since $\{B_n\}$ are). By λ-system property, $\bigcup (A \cap B_n) = A \cap (\bigcup B_n) \in \lambda(\mathcal{P})$. Thus $\bigcup B_n \in \mathcal{D}_A$.

**Substep 2b**: Show $\mathcal{P} \subseteq \mathcal{D}_A$ for all $A \in \mathcal{P}$.

Let $A \in \mathcal{P}$ and $B \in \mathcal{P}$. Since $\mathcal{P}$ is a π-system, $A \cap B \in \mathcal{P} \subseteq \lambda(\mathcal{P})$. Thus $B \in \mathcal{D}_A$ for all $B \in \mathcal{P}$. Therefore $\mathcal{P} \subseteq \mathcal{D}_A$.

**Substep 2c**: Since $\mathcal{D}_A$ is a λ-system containing $\mathcal{P}$ and $\lambda(\mathcal{P})$ is the *smallest* λ-system containing $\mathcal{P}$, we have $\lambda(\mathcal{P}) \subseteq \mathcal{D}_A$. This means: for all $A \in \mathcal{P}$ and all $B \in \lambda(\mathcal{P})$, we have $A \cap B \in \lambda(\mathcal{P})$.

**Substep 2d**: Now let $B \in \lambda(\mathcal{P})$ be arbitrary. Define:
$$
\mathcal{D}_B = \{A \in \lambda(\mathcal{P}) : A \cap B \in \lambda(\mathcal{P})\}
$$

By the same argument as Substep 2a, $\mathcal{D}_B$ is a λ-system. By Substep 2c, $\mathcal{P} \subseteq \mathcal{D}_B$. Thus $\lambda(\mathcal{P}) \subseteq \mathcal{D}_B$, which means: for all $A, B \in \lambda(\mathcal{P})$, we have $A \cap B \in \lambda(\mathcal{P})$.

This proves $\lambda(\mathcal{P})$ is a π-system.

**Step 3: Conclude $\lambda(\mathcal{P})$ is a σ-algebra.**

By Step 2, $\lambda(\mathcal{P})$ is a π-system. By Step 1, it is a λ-system. By Proposition A2.1.2, $\lambda(\mathcal{P})$ is a σ-algebra.

**Step 4: Deduce the theorem.**

Since $\lambda(\mathcal{P})$ is a σ-algebra containing $\mathcal{P}$, and $\sigma(\mathcal{P})$ is the *smallest* σ-algebra containing $\mathcal{P}$, we have:
$$
\sigma(\mathcal{P}) \subseteq \lambda(\mathcal{P})
$$

Now, by hypothesis, $\mathcal{L}$ is a λ-system containing $\mathcal{P}$. By the minimality of $\lambda(\mathcal{P})$:
$$
\lambda(\mathcal{P}) \subseteq \mathcal{L}
$$

Combining these inclusions:
$$
\sigma(\mathcal{P}) \subseteq \lambda(\mathcal{P}) \subseteq \mathcal{L}
$$
$\square$

**Pedagogical Remark.** The proof hinges on the subtle interplay between π-systems (finite intersections) and λ-systems (disjoint unions). The key insight is that the "deficiency" of a λ-system (not closed under arbitrary unions) is corrected by the π-system property (closed under intersections), allowing us to disjointify unions as in Proposition A2.1.2. The double use of the minimality argument (Substeps 2b-2d) is a classic "bootstrap" technique in measure theory.

---

### **IV. The Monotone Class Theorem**

The π-λ theorem addresses σ-algebras generated by π-systems. A complementary result, the **monotone class theorem**, characterizes σ-algebras generated by algebras (collections closed under finite unions and intersections).

**Definition A2.1.3 (Monotone Class).** {#DEF-2.2.A3} Let $X$ be a non-empty set. A collection $\mathcal{M} \subseteq 2^X$ is a **monotone class** if it is closed under monotone limits:
1. **(Increasing limits)** If $\{A_n\}_{n=1}^{\infty} \subseteq \mathcal{M}$ with $A_1 \subseteq A_2 \subseteq A_3 \subseteq \cdots$, then $\bigcup_{n=1}^{\infty} A_n \in \mathcal{M}$
2. **(Decreasing limits)** If $\{A_n\}_{n=1}^{\infty} \subseteq \mathcal{M}$ with $A_1 \supseteq A_2 \supseteq A_3 \supseteq \cdots$, then $\bigcap_{n=1}^{\infty} A_n \in \mathcal{M}$

**Observation.** Every σ-algebra is a monotone class (since monotone limits are special cases of countable unions/intersections). However, monotone classes are simpler: they require closure only under limits of monotone sequences, not arbitrary countable operations.

**Theorem A2.1.2 (Monotone Class Theorem).** {#THM-2.2.A2} Let $\mathcal{A}$ be an algebra on $X$ (i.e., closed under finite unions, intersections, and complements, and containing $X$) and $\mathcal{M}$ a monotone class on $X$ with $\mathcal{A} \subseteq \mathcal{M}$. Then:
$$
\sigma(\mathcal{A}) \subseteq \mathcal{M}
$$

*Proof.* We prove this via the π-λ theorem.

**Step 1**: Every algebra is a π-system (closed under finite intersections by definition of algebra).

**Step 2**: We claim that every monotone class containing an algebra is a λ-system.

Let $\mathcal{M}$ be a monotone class with $\mathcal{A} \subseteq \mathcal{M}$, where $\mathcal{A}$ is an algebra.
- $X \in \mathcal{M}$ since $X \in \mathcal{A} \subseteq \mathcal{M}$.
- If $A \in \mathcal{M}$, we must show $A^c \in \mathcal{M}$. This is not automatic from the monotone class property. However, if $A \in \mathcal{A}$, then $A^c \in \mathcal{A} \subseteq \mathcal{M}$ (since $\mathcal{A}$ is an algebra). For general $A \in \mathcal{M}$, we use a density argument: the monotone class generated by $\mathcal{A}$ inherits closure under complements from $\mathcal{A}$ via monotone approximations. (This step requires constructing the smallest monotone class $\mathcal{M}(\mathcal{A})$ containing $\mathcal{A}$ and showing it is closed under complements—a technical argument we omit for brevity; see [@folland:real_analysis:1999, Theorem 1.10] for details.)
- For countable disjoint unions: If $\{A_n\}$ are pairwise disjoint in $\mathcal{M}$, define $B_N = \bigcup_{n=1}^N A_n$. The sequence $\{B_N\}$ is increasing and (by induction on algebra closure) each $B_N$ can be approximated by algebra elements. The monotone class property gives $\bigcup_{n=1}^{\infty} A_n = \lim_{N \to \infty} B_N \in \mathcal{M}$.

Thus $\mathcal{M}$ is a λ-system.

**Step 3**: By the π-λ theorem (Theorem A2.1.1), since $\mathcal{A}$ is a π-system and $\mathcal{M}$ is a λ-system containing $\mathcal{A}$, we have $\sigma(\mathcal{A}) \subseteq \mathcal{M}$. $\square$

**Remark A2.1.2 (When to Use π-λ vs. Monotone Class).**
- **π-λ theorem**: Use when the generating class is a π-system but not necessarily an algebra (e.g., open intervals, rectangles).
- **Monotone class theorem**: Use when the generating class is an algebra (e.g., finite unions of rectangles) and when proving measurability of functions defined via limits.

**Application to Measurability.** The monotone class theorem is particularly useful for proving measurability of functions defined via limits. If $\{f_n\}$ are measurable functions converging pointwise to $f$, and if the collection of sets $\{f_n^{-1}(B)\}$ forms a monotone class, the monotone class theorem implies $f$ is measurable. This technique appears frequently in probability theory and RL when analyzing value function approximations.

---

### **V. Application: Borel σ-Algebra Construction**

We now apply the π-λ theorem to rigorously construct the Borel σ-algebra from various generating classes.

**Theorem A2.1.3 (Borel σ-Algebra from Generating Classes).** {#THM-2.2.A3} The following equalities hold:
$$
\mathcal{B}(\mathbb{R}) = \sigma(\{(a,b) : a < b\}) = \sigma(\{[a,b) : a \leq b\}) = \sigma(\{[a,b] : a \leq b\}) = \sigma(\text{open sets})
$$

That is, the Borel σ-algebra is generated by open intervals, half-open intervals, closed intervals, or all open sets.

*Proof.* We prove the first equality $\mathcal{B}(\mathbb{R}) = \sigma(\{(a,b) : a < b\})$ using the π-λ theorem. The other equalities follow by similar arguments.

**Notation.** Let $\mathcal{P} = \{(a,b) : a < b \text{ with } a,b \in \mathbb{R}\}$, the collection of open intervals (including the empty interval when $a \geq b$).

**Step 1: Show $\mathcal{P}$ is a π-system.**

Let $(a_1, b_1), (a_2, b_2) \in \mathcal{P}$. Their intersection is:
$$
(a_1, b_1) \cap (a_2, b_2) = (\max(a_1, a_2), \min(b_1, b_2))
$$

If $\max(a_1, a_2) < \min(b_1, b_2)$, this is an open interval in $\mathcal{P}$. Otherwise, it is empty, which we consider as the degenerate interval $(\alpha, \alpha) = \emptyset$ for any $\alpha$. Thus $\mathcal{P}$ is closed under finite intersections.

**Step 2: Show $\mathcal{B}(\mathbb{R})$ is a λ-system containing $\mathcal{P}$.**

We know $\mathcal{B}(\mathbb{R})$ is a σ-algebra, hence a λ-system (Proposition A2.1.1). Every open interval is an open set, so $(a,b) \in \mathcal{B}(\mathbb{R})$ for all $(a,b) \in \mathcal{P}$. Thus $\mathcal{P} \subseteq \mathcal{B}(\mathbb{R})$.

**Step 3: Apply π-λ theorem.**

By Theorem A2.1.1, since $\mathcal{P}$ is a π-system and $\mathcal{B}(\mathbb{R})$ is a λ-system containing $\mathcal{P}$:
$$
\sigma(\mathcal{P}) \subseteq \mathcal{B}(\mathbb{R}) \tag{A2.1}
$$

**Step 4: Prove the reverse inclusion $\mathcal{B}(\mathbb{R}) \subseteq \sigma(\mathcal{P})$.**

By definition, $\mathcal{B}(\mathbb{R})$ is the smallest σ-algebra containing all open sets. Thus it suffices to show every open set $U \subseteq \mathbb{R}$ is in $\sigma(\mathcal{P})$.

**Claim**: Every open set $U \subseteq \mathbb{R}$ is a countable union of open intervals.

*Proof of Claim*: For each $x \in U$, since $U$ is open, there exists $\epsilon_x > 0$ such that $(x - \epsilon_x, x + \epsilon_x) \subseteq U$. The collection of all such intervals covers $U$:
$$
U = \bigcup_{x \in U} (x - \epsilon_x, x + \epsilon_x)
$$

However, this is an uncountable union. To obtain a countable union, observe that every open set in $\mathbb{R}$ is a countable union of open intervals with rational endpoints. Specifically:

For any $x \in U$, choose $\epsilon > 0$ such that $(x - \epsilon, x + \epsilon) \subseteq U$. Since the rationals $\mathbb{Q}$ are dense in $\mathbb{R}$, there exist rationals $p, q$ with $x - \epsilon < p < x < q < x + \epsilon$ and $(p, q) \subseteq U$. Thus every point in $U$ is contained in some open interval with rational endpoints that is itself contained in $U$.

Let $\mathcal{I} = \{(p, q) : p, q \in \mathbb{Q}, p < q, (p,q) \subseteq U\}$. This is a countable collection (since $\mathbb{Q} \times \mathbb{Q}$ is countable). We have:
$$
U = \bigcup_{(p,q) \in \mathcal{I}} (p, q)
$$

Each $(p, q) \in \mathcal{P} \subseteq \sigma(\mathcal{P})$, and σ-algebras are closed under countable unions. Therefore $U \in \sigma(\mathcal{P})$.

Since every open set is in $\sigma(\mathcal{P})$, and $\mathcal{B}(\mathbb{R})$ is the smallest σ-algebra containing all open sets:
$$
\mathcal{B}(\mathbb{R}) \subseteq \sigma(\mathcal{P}) \tag{A2.2}
$$

**Step 5: Conclusion.**

From (A2.1) and (A2.2), we have $\sigma(\mathcal{P}) = \mathcal{B}(\mathbb{R})$. $\square$

**Remark A2.1.3 (Other Generating Classes).** The proofs for $\sigma(\{[a,b)\}) = \mathcal{B}(\mathbb{R})$ and $\sigma(\{[a,b]\}) = \mathcal{B}(\mathbb{R})$ follow similar strategies:
- Show the half-open (or closed) intervals form a π-system
- Show every open interval (and hence every open set) can be written as a countable union of half-open (or closed) intervals
- Conversely, show half-open intervals are Borel sets (e.g., $[a,b) = \bigcap_{n=1}^{\infty} (a - 1/n, b)$)

These details are left as exercises.

---

### **VI. Connection to Product σ-Algebras**

The π-λ theorem provides the theoretical foundation for the **product σ-algebra** construction, which is the main focus of Week 2, Day 2.

**Setup.** Let $(X, \mathcal{F}_X)$ and $(Y, \mathcal{F}_Y)$ be two measurable spaces. Define the collection of **rectangles**:
$$
\mathcal{R} = \{A \times B : A \in \mathcal{F}_X, B \in \mathcal{F}_Y\}
$$

The **product σ-algebra** is defined as:
$$
\mathcal{F}_X \otimes \mathcal{F}_Y = \sigma(\mathcal{R})
$$

**Proposition A2.1.3 (Rectangles Form a π-System).** {#PROP-2.2.A3} The collection $\mathcal{R}$ of rectangles is a π-system on $X \times Y$.

*Proof.* Let $A_1 \times B_1, A_2 \times B_2 \in \mathcal{R}$. Their intersection is:
$$
(A_1 \times B_1) \cap (A_2 \times B_2) = (A_1 \cap A_2) \times (B_1 \cap B_2)
$$

Since $\mathcal{F}_X$ and $\mathcal{F}_Y$ are σ-algebras (hence closed under intersections), we have $A_1 \cap A_2 \in \mathcal{F}_X$ and $B_1 \cap B_2 \in \mathcal{F}_Y$. Thus the intersection is a rectangle in $\mathcal{R}$. $\square$

**Application.** To prove properties of sets in $\mathcal{F}_X \otimes \mathcal{F}_Y = \sigma(\mathcal{R})$, we use the π-λ theorem:
1. Verify the property holds for all rectangles (the generating π-system)
2. Show the collection of sets with the property forms a λ-system
3. Conclude the property holds for all sets in $\sigma(\mathcal{R})$

This technique is used in Week 2, Day 2 to prove uniqueness of product measures and to establish Fubini-Tonelli theorem (Week 2, Day 3).

---

### **VII. Application to Reinforcement Learning: Trajectory Spaces**

In reinforcement learning, we model an agent's interaction with an environment as a **trajectory**—an infinite sequence of states and actions:
$$
(s_0, a_0, s_1, a_1, s_2, a_2, \ldots) \in \mathcal{S} \times \mathcal{A} \times \mathcal{S} \times \mathcal{A} \times \cdots
$$

To define probabilities over trajectories (induced by a policy $\pi$ and transition dynamics $P$), we need a σ-algebra on the trajectory space.

**Construction.** Let $(\mathcal{S}, \mathcal{F}_{\mathcal{S}})$ and $(\mathcal{A}, \mathcal{F}_{\mathcal{A}})$ be the state and action spaces (measurable spaces). The trajectory space is the infinite product:
$$
\Omega = (\mathcal{S} \times \mathcal{A})^{\infty} = \mathcal{S} \times \mathcal{A} \times \mathcal{S} \times \mathcal{A} \times \cdots
$$

The **product σ-algebra** on $\Omega$ is generated by **cylinder sets**—sets that depend only on the first $n$ components:
$$
\mathcal{C}_n = \{(s_0, a_0, \ldots, s_{n-1}, a_{n-1}, s_n, a_n, s_{n+1}, \ldots) : (s_0, \ldots, a_n) \in E\}
$$
where $E \in (\mathcal{F}_{\mathcal{S}} \otimes \mathcal{F}_{\mathcal{A}})^{\otimes (n+1)}$ is a measurable set in the finite product.

**Key insight.** The collection of cylinder sets forms a π-system (intersection of two cylinder sets depending on first $n$ and $m$ components gives a cylinder set depending on $\max(n,m)$ components). The σ-algebra generated by cylinder sets is the appropriate structure for defining probability measures over trajectories.

**Measurability of policies.** A deterministic policy $\pi: \mathcal{S} \to \mathcal{A}$ must be measurable: for every $B \in \mathcal{F}_{\mathcal{A}}$, the set $\pi^{-1}(B) = \{s \in \mathcal{S} : \pi(s) \in B\}$ must be in $\mathcal{F}_{\mathcal{S}}$. This ensures that the probability measure induced by $\pi$ on trajectory space (via the Kolmogorov extension theorem, Week 4) is well-defined.

**Why π-λ matters here.** The Kolmogorov extension theorem (Week 4, Day 2) constructs a probability measure on $\Omega$ by specifying its values on cylinder sets (the π-system). The theorem guarantees unique extension to the entire product σ-algebra $\sigma(\text{cylinders})$—precisely the setup of the π-λ theorem.

---

### **VIII. Exercises**

**Exercise A2.1.1** [30 min] **Verifying π-System and λ-System Properties**

(a) Show that the collection $\mathcal{H} = \{[a, \infty) : a \in \mathbb{R}\}$ of right-unbounded intervals is a π-system on $\mathbb{R}$.

(b) Is $\mathcal{H}$ a λ-system? If not, explicitly identify which axiom fails.

(c) Show that $\sigma(\mathcal{H}) = \mathcal{B}(\mathbb{R})$ by proving every open interval $(a,b)$ is in $\sigma(\mathcal{H})$.

---

**Exercise A2.1.2** [40 min] **Applying π-λ Theorem to Product Spaces**

Let $(\mathcal{S}, \mathcal{F}_{\mathcal{S}})$ be a measurable space. Define the collection:
$$
\mathcal{R}_n = \{A_1 \times A_2 \times \cdots \times A_n : A_i \in \mathcal{F}_{\mathcal{S}} \text{ for all } i\}
$$
of "rectangles" in the $n$-fold product $\mathcal{S}^n$.

(a) Prove $\mathcal{R}_n$ is a π-system on $\mathcal{S}^n$.

(b) Let $\mathcal{L}$ be the collection of all sets $E \subseteq \mathcal{S}^n$ such that the function $\mathbf{1}_E: \mathcal{S}^n \to \{0,1\}$ is measurable with respect to the product σ-algebra $\mathcal{F}_{\mathcal{S}}^{\otimes n}$. Show that $\mathcal{L}$ is a λ-system.

(c) Conclude that every set in the product σ-algebra $\mathcal{F}_{\mathcal{S}}^{\otimes n} = \sigma(\mathcal{R}_n)$ has a measurable indicator function.

---

**Exercise A2.1.3** [35 min] **Monotone Class Theorem for Measurable Functions**

Let $\mathcal{A}$ be an algebra on $X$ and let $\mathcal{M}$ be the collection of all bounded real-valued functions $f: X \to \mathbb{R}$ such that:
- $f$ is $\sigma(\mathcal{A})$-measurable
- $f$ can be approximated by $\mathcal{A}$-measurable functions (i.e., functions measurable with respect to the algebra $\mathcal{A}$)

(a) Show that $\mathcal{M}$ is a **monotone class of functions**: if $\{f_n\} \subseteq \mathcal{M}$ is a monotone sequence (pointwise increasing or decreasing) converging to $f$, then $f \in \mathcal{M}$.

(b) Prove that every indicator function $\mathbf{1}_A$ for $A \in \sigma(\mathcal{A})$ is in $\mathcal{M}$.

(c) Deduce that every bounded $\sigma(\mathcal{A})$-measurable function can be approximated by $\mathcal{A}$-measurable functions.

**Hint for (a)**: Use the Monotone Convergence Theorem (Week 1, Day 2) to handle limits.

---

### **Mathematical Insight**

The π-λ theorem reveals a profound principle: **σ-algebras are characterized by two simpler closure properties—finite intersections (π) and disjoint unions (λ)**. This decomposition provides a practical computational strategy:

1. **Identify a simple generating class** (often a π-system, like intervals or rectangles)
2. **Verify a property on the generator** (tractable, since generators are simple)
3. **Show the collection of sets with the property is a λ-system** (verify three axioms)
4. **Conclude the property holds for the entire σ-algebra** (by π-λ theorem)

This three-step recipe appears throughout measure theory:
- **Uniqueness of measures** (Week 2, Day 2): Two measures agreeing on a π-system agree on $\sigma(\mathcal{P})$
- **Fubini's theorem** (Week 2, Day 3): Equality of iterated integrals for rectangles extends to $\mathcal{F}_X \otimes \mathcal{F}_Y$
- **Independence of σ-algebras** (Week 4): $\mathbb{P}(A \cap B) = \mathbb{P}(A)\mathbb{P}(B)$ on generators implies independence

The monotone class theorem provides a parallel tool for **functional analysis**: proving properties of measurable functions by verifying them for simple functions (like indicators of algebra sets) and extending via monotone limits. This is the foundation for approximation techniques in $L^p$ theory (Week 2-3) and for proving convergence of value function iterates in RL (Weeks 23-26).

---

### **Connection to Main Text (Week 2, Day 2)**

This appendix provides the theoretical foundation for the product σ-algebra construction developed in Week 2, Day 2. Specifically:

1. **Proposition A2.1.3** justifies that rectangles $A \times B$ form a generating π-system for $\mathcal{F}_X \otimes \mathcal{F}_Y$

2. **Theorem A2.1.1** (π-λ theorem) is the tool used in Week 2, Day 2 to prove:
   - **Uniqueness of product measures** (two measures on $X \times Y$ agreeing on rectangles must agree on all of $\mathcal{F}_X \otimes \mathcal{F}_Y$)
   - **Extension from algebra to σ-algebra** (constructing product measures via Carathéodory extension)

3. **Theorem A2.1.3** rigorously establishes that the Borel σ-algebra $\mathcal{B}(\mathbb{R})$ is indeed generated by open intervals, a fact we stated without proof in Week 1, Day 1

The main Week 2, Day 2 content proceeds assuming these results—readers can either trust them initially and return to this appendix for proofs, or study this appendix first for complete rigor.

---

### **References for Further Reading**

- [@folland:real_analysis:1999, §1.2]: Comprehensive treatment of generated σ-algebras and the monotone class theorem
- [@durrett:probability:2019, §2.1]: π-λ theorem with applications to probability spaces
- [@billingsley:probability:1995, §3]: Detailed exposition of product spaces and the Kolmogorov extension theorem

---

**End of Appendix A2.1**
